
> llm-chat@0.0.1 test:no-selenium
> jest --testPathIgnorePatterns=__tests__/selenium

PASS __tests__/server/messageHelpers.test.ts (47.478 s)
  ● Console

    console.log
      completionContent: Mocked OpenAI response

      at log (server/helpers/messageHelpers.ts:242:13)

    console.log
      completionContent: Mocked Anthropic response

      at log (server/helpers/messageHelpers.ts:242:13)

    console.log
      completionContent: Mocked OpenAI response

      at log (server/helpers/messageHelpers.ts:242:13)

PASS __tests__/server/index.test.ts (47.892 s)
PASS __tests__/server/server.test.ts (21.693 s)
  ● Console

    console.log
      completionContent: Mocked OpenAI response

      at log (server/helpers/messageHelpers.ts:242:13)

    console.log
      completionContent: Mocked OpenAI response

      at log (server/helpers/messageHelpers.ts:242:13)

    console.log
      completionContent: Mocked Anthropic response

      at log (server/helpers/messageHelpers.ts:242:13)

    console.error
      Error occurred: ReferenceError: setImmediate is not defined
          at Console.log (/workspace/jakethekoenig_llm-chat/node_modules/winston/lib/winston/transports/console.js:53:5)
          at Console._write (/workspace/jakethekoenig_llm-chat/node_modules/winston-transport/modern.js:82:19)
          at doWrite (/workspace/jakethekoenig_llm-chat/node_modules/readable-stream/lib/_stream_writable.js:390:139)
          at writeOrBuffer (/workspace/jakethekoenig_llm-chat/node_modules/readable-stream/lib/_stream_writable.js:381:5)
          at Console.Object.<anonymous>.Writable.write (/workspace/jakethekoenig_llm-chat/node_modules/readable-stream/lib/_stream_writable.js:302:11)
          at DerivedLogger.ondata (/workspace/jakethekoenig_llm-chat/node_modules/readable-stream/lib/_stream_readable.js:629:20)
          at DerivedLogger.emit (node:events:517:28)
          at addChunk (/workspace/jakethekoenig_llm-chat/node_modules/readable-stream/lib/_stream_readable.js:279:12)
          at readableAddChunk (/workspace/jakethekoenig_llm-chat/node_modules/readable-stream/lib/_stream_readable.js:262:11)
          at DerivedLogger.Object.<anonymous>.Readable.push (/workspace/jakethekoenig_llm-chat/node_modules/readable-stream/lib/_stream_readable.js:228:10)
          at DerivedLogger.Object.<anonymous>.Transform.push (/workspace/jakethekoenig_llm-chat/node_modules/readable-stream/lib/_stream_transform.js:132:32)
          at DerivedLogger._transform (/workspace/jakethekoenig_llm-chat/node_modules/winston/lib/winston/logger.js:314:12)
          at DerivedLogger.Object.<anonymous>.Transform._read (/workspace/jakethekoenig_llm-chat/node_modules/readable-stream/lib/_stream_transform.js:166:10)
          at DerivedLogger.Object.<anonymous>.Transform._write (/workspace/jakethekoenig_llm-chat/node_modules/readable-stream/lib/_stream_transform.js:155:83)
          at doWrite (/workspace/jakethekoenig_llm-chat/node_modules/readable-stream/lib/_stream_writable.js:390:139)
          at writeOrBuffer (/workspace/jakethekoenig_llm-chat/node_modules/readable-stream/lib/_stream_writable.js:381:5)
          at DerivedLogger.Object.<anonymous>.Writable.write (/workspace/jakethekoenig_llm-chat/node_modules/readable-stream/lib/_stream_writable.js:302:11)
          at DerivedLogger.log (/workspace/jakethekoenig_llm-chat/node_modules/winston/lib/winston/logger.js:253:14)
          at DerivedLogger.<computed> [as error] (/workspace/jakethekoenig_llm-chat/node_modules/winston/lib/winston/create-logger.js:95:19)
          at error (/workspace/jakethekoenig_llm-chat/server/helpers/messageHelpers.ts:254:14)
          at /workspace/jakethekoenig_llm-chat/server/app.ts:306:29

      94 |   next: express.NextFunction
      95 | ) => {
    > 96 |   console.error('Error occurred:', err);
         |           ^
      97 |
      98 |   // Handle validation errors
      99 |   if (err.name === 'ValidationError') {

      at error (server/app.ts:96:11)
      at Layer.handle_error (node_modules/express/lib/router/layer.js:71:5)
      at trim_prefix (node_modules/express/lib/router/index.js:326:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at next (node_modules/express/lib/router/route.js:141:14)

    console.log
      completionContent: Mocked Anthropic response

      at log (server/helpers/messageHelpers.ts:242:13)

    console.log
      completionContent: Mocked Anthropic response

      at log (server/helpers/messageHelpers.ts:242:13)

    console.log
      completionContent: Mocked Anthropic response

      at log (server/helpers/messageHelpers.ts:242:13)

    console.error
      Error occurred: Error: Completion service unavailable
          at /workspace/jakethekoenig_llm-chat/__tests__/server/server.test.ts:277:15
          at /workspace/jakethekoenig_llm-chat/node_modules/jest-mock/build/index.js:397:39
          at /workspace/jakethekoenig_llm-chat/node_modules/jest-mock/build/index.js:404:13
          at mockConstructor (/workspace/jakethekoenig_llm-chat/node_modules/jest-mock/build/index.js:148:19)
          at /workspace/jakethekoenig_llm-chat/server/app.ts:306:53
          at fn (/workspace/jakethekoenig_llm-chat/server/app.ts:147:19)
          at Layer.handle [as handle_request] (/workspace/jakethekoenig_llm-chat/node_modules/express/lib/router/layer.js:95:5)
          at next (/workspace/jakethekoenig_llm-chat/node_modules/express/lib/router/route.js:149:13)
          at middleware (/workspace/jakethekoenig_llm-chat/node_modules/express-validator/lib/middlewares/check.js:16:13)
          at processTicksAndRejections (node:internal/process/task_queues:95:5)

      94 |   next: express.NextFunction
      95 | ) => {
    > 96 |   console.error('Error occurred:', err);
         |           ^
      97 |
      98 |   // Handle validation errors
      99 |   if (err.name === 'ValidationError') {

      at error (server/app.ts:96:11)
      at Layer.handle_error (node_modules/express/lib/router/layer.js:71:5)
      at trim_prefix (node_modules/express/lib/router/index.js:326:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at next (node_modules/express/lib/router/route.js:141:14)

    console.log
      completionContent: Mocked OpenAI response

      at log (server/helpers/messageHelpers.ts:242:13)

    console.log
      completionContent: Mocked OpenAI response

      at log (server/helpers/messageHelpers.ts:242:13)

    console.error
      Error occurred: Error: Failed to generate completion
          at generateCompletion (/workspace/jakethekoenig_llm-chat/server/helpers/messageHelpers.ts:258:11)
          at /workspace/jakethekoenig_llm-chat/server/app.ts:306:29

      94 |   next: express.NextFunction
      95 | ) => {
    > 96 |   console.error('Error occurred:', err);
         |           ^
      97 |
      98 |   // Handle validation errors
      99 |   if (err.name === 'ValidationError') {

      at error (server/app.ts:96:11)
      at Layer.handle_error (node_modules/express/lib/router/layer.js:71:5)
      at trim_prefix (node_modules/express/lib/router/index.js:326:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at next (node_modules/express/lib/router/route.js:141:14)

    console.error
      Error occurred: Error: Parent message with ID 9999 not found
          at generateCompletion (/workspace/jakethekoenig_llm-chat/server/helpers/messageHelpers.ts:223:11)
          at /workspace/jakethekoenig_llm-chat/server/app.ts:306:29

      94 |   next: express.NextFunction
      95 | ) => {
    > 96 |   console.error('Error occurred:', err);
         |           ^
      97 |
      98 |   // Handle validation errors
      99 |   if (err.name === 'ValidationError') {

      at error (server/app.ts:96:11)
      at Layer.handle_error (node_modules/express/lib/router/layer.js:71:5)
      at trim_prefix (node_modules/express/lib/router/index.js:326:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at next (node_modules/express/lib/router/route.js:141:14)

    console.error
      Error occurred: Error: Parent message with ID 9999 not found
          at generateCompletion (/workspace/jakethekoenig_llm-chat/server/helpers/messageHelpers.ts:223:11)
          at /workspace/jakethekoenig_llm-chat/server/app.ts:306:29

      94 |   next: express.NextFunction
      95 | ) => {
    > 96 |   console.error('Error occurred:', err);
         |           ^
      97 |
      98 |   // Handle validation errors
      99 |   if (err.name === 'ValidationError') {

      at error (server/app.ts:96:11)
      at Layer.handle_error (node_modules/express/lib/router/layer.js:71:5)
      at trim_prefix (node_modules/express/lib/router/index.js:326:13)
      at node_modules/express/lib/router/index.js:286:9
      at Function.process_params (node_modules/express/lib/router/index.js:346:12)
      at next (node_modules/express/lib/router/index.js:280:10)
      at next (node_modules/express/lib/router/route.js:141:14)

PASS __tests__/component/ConversationList.test.tsx (9.18 s)
  ● Console

    console.error
      Warning: An update to ConversationList inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
          at conversations (/workspace/jakethekoenig_llm-chat/chat-components/ConversationList.tsx:12:3)

      47 |       const success = await onTitleUpdate(editingId, trimmedTitle);
      48 |       if (success) {
    > 49 |         setEditingId(null);
         |         ^
      50 |       }
      51 |     } catch (error) {
      52 |       console.error('Failed to update title:', error);

      at printWarning (node_modules/react-dom/cjs/react-dom.development.js:86:30)
      at error (node_modules/react-dom/cjs/react-dom.development.js:60:7)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom.development.js:27628:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom.development.js:25547:5)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom.development.js:16708:7)
      at setEditingId (chat-components/ConversationList.tsx:49:9)

    console.error
      Warning: An update to ConversationList inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
          at conversations (/workspace/jakethekoenig_llm-chat/chat-components/ConversationList.tsx:12:3)

      52 |       console.error('Failed to update title:', error);
      53 |     } finally {
    > 54 |       setIsUpdating(false);
         |       ^
      55 |     }
      56 |   };
      57 |

      at printWarning (node_modules/react-dom/cjs/react-dom.development.js:86:30)
      at error (node_modules/react-dom/cjs/react-dom.development.js:60:7)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom.development.js:27628:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom.development.js:25547:5)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom.development.js:16708:7)
      at setIsUpdating (chat-components/ConversationList.tsx:54:7)

PASS __tests__/server/models.test.ts (11.7 s)
PASS __tests__/MessageConfigContext.test.tsx (5.668 s)
PASS __tests__/server/typeConverters.test.ts
PASS __tests__/component/Message.test.tsx (105.335 s)
  ● Console

    console.error
      Warning: An update to Message inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
          at renderers (/workspace/jakethekoenig_llm-chat/chat-components/Message.tsx:54:44)
          at config (/workspace/jakethekoenig_llm-chat/chat-components/MessageConfigContext.tsx:33:99)

      132 |     try {
      133 |       await onDelete(id);
    > 134 |       setShowDeleteDialog(false);
          |       ^
      135 |     } catch (error) {
      136 |       console.error('Failed to delete message:', error);
      137 |       setShowDeleteDialog(false);

      at printWarning (node_modules/react-dom/cjs/react-dom.development.js:86:30)
      at error (node_modules/react-dom/cjs/react-dom.development.js:60:7)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom.development.js:27628:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom.development.js:25547:5)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom.development.js:16708:7)
      at setShowDeleteDialog (chat-components/Message.tsx:134:7)

    console.error
      Warning: An update to Message inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
          at renderers (/workspace/jakethekoenig_llm-chat/chat-components/Message.tsx:54:44)
          at config (/workspace/jakethekoenig_llm-chat/chat-components/MessageConfigContext.tsx:33:99)

      137 |       setShowDeleteDialog(false);
      138 |     } finally {
    > 139 |       setIsLoading(false);
          |       ^
      140 |     }
      141 |   };
      142 |

      at printWarning (node_modules/react-dom/cjs/react-dom.development.js:86:30)
      at error (node_modules/react-dom/cjs/react-dom.development.js:60:7)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom.development.js:27628:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom.development.js:25547:5)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom.development.js:16708:7)
      at setIsLoading (chat-components/Message.tsx:139:7)

    console.error
      Warning: An update to Message inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
          at renderers (/workspace/jakethekoenig_llm-chat/chat-components/Message.tsx:54:44)
          at config (/workspace/jakethekoenig_llm-chat/chat-components/MessageConfigContext.tsx:33:99)

      111 |     try {
      112 |       await onEdit(id, editContent.trim());
    > 113 |       setIsEditing(false);
          |       ^
      114 |       setEditContent('');
      115 |     } catch (error) {
      116 |       console.error('Failed to edit message:', error);

      at printWarning (node_modules/react-dom/cjs/react-dom.development.js:86:30)
      at error (node_modules/react-dom/cjs/react-dom.development.js:60:7)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom.development.js:27628:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom.development.js:25547:5)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom.development.js:16708:7)
      at setIsEditing (chat-components/Message.tsx:113:7)

    console.error
      Warning: An update to Message inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
          at renderers (/workspace/jakethekoenig_llm-chat/chat-components/Message.tsx:54:44)
          at config (/workspace/jakethekoenig_llm-chat/chat-components/MessageConfigContext.tsx:33:99)

      112 |       await onEdit(id, editContent.trim());
      113 |       setIsEditing(false);
    > 114 |       setEditContent('');
          |       ^
      115 |     } catch (error) {
      116 |       console.error('Failed to edit message:', error);
      117 |       // Keep editing mode open on error so user can retry

      at printWarning (node_modules/react-dom/cjs/react-dom.development.js:86:30)
      at error (node_modules/react-dom/cjs/react-dom.development.js:60:7)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom.development.js:27628:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom.development.js:25547:5)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom.development.js:16708:7)
      at setEditContent (chat-components/Message.tsx:114:7)

    console.error
      Warning: An update to Message inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
          at renderers (/workspace/jakethekoenig_llm-chat/chat-components/Message.tsx:54:44)
          at config (/workspace/jakethekoenig_llm-chat/chat-components/MessageConfigContext.tsx:33:99)

      117 |       // Keep editing mode open on error so user can retry
      118 |     } finally {
    > 119 |       setIsLoading(false);
          |       ^
      120 |     }
      121 |   };
      122 |

      at printWarning (node_modules/react-dom/cjs/react-dom.development.js:86:30)
      at error (node_modules/react-dom/cjs/react-dom.development.js:60:7)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom.development.js:27628:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom.development.js:25547:5)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom.development.js:16708:7)
      at setIsLoading (chat-components/Message.tsx:119:7)

    console.error
      Warning: The current testing environment is not configured to support act(...)

      132 |     try {
      133 |       await onDelete(id);
    > 134 |       setShowDeleteDialog(false);
          |       ^
      135 |     } catch (error) {
      136 |       console.error('Failed to delete message:', error);
      137 |       setShowDeleteDialog(false);

      at printWarning (node_modules/react-dom/cjs/react-dom.development.js:86:30)
      at error (node_modules/react-dom/cjs/react-dom.development.js:60:7)
      at isConcurrentActEnvironment (node_modules/react-dom/cjs/react-dom.development.js:25299:7)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom.development.js:27598:12)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom.development.js:25547:5)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom.development.js:16708:7)
      at setShowDeleteDialog (chat-components/Message.tsx:134:7)

    console.error
      Warning: The current testing environment is not configured to support act(...)

      137 |       setShowDeleteDialog(false);
      138 |     } finally {
    > 139 |       setIsLoading(false);
          |       ^
      140 |     }
      141 |   };
      142 |

      at printWarning (node_modules/react-dom/cjs/react-dom.development.js:86:30)
      at error (node_modules/react-dom/cjs/react-dom.development.js:60:7)
      at isConcurrentActEnvironment (node_modules/react-dom/cjs/react-dom.development.js:25299:7)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom.development.js:27598:12)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom.development.js:25547:5)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom.development.js:16708:7)
      at setIsLoading (chat-components/Message.tsx:139:7)

    console.error
      Warning: The current testing environment is not configured to support act(...)

      at printWarning (node_modules/react-dom/cjs/react-dom.development.js:86:30)
      at error (node_modules/react-dom/cjs/react-dom.development.js:60:7)
      at isConcurrentActEnvironment (node_modules/react-dom/cjs/react-dom.development.js:25299:7)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom.development.js:27598:12)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom.development.js:25547:5)
      at Object.enqueueSetState (node_modules/react-dom/cjs/react-dom.development.js:17925:7)
      at Transition.Object.<anonymous>.Component.setState (node_modules/react/cjs/react.development.js:354:16)
      at Transition.safeSetState (node_modules/react-transition-group/cjs/Transition.js:353:10)
      at node_modules/react-transition-group/cjs/Transition.js:300:16
      at nextCallback (node_modules/react-transition-group/cjs/Transition.js:365:9)
      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)

    console.error
      Warning: The current testing environment is not configured to support act(...)

      at printWarning (node_modules/react-dom/cjs/react-dom.development.js:86:30)
      at error (node_modules/react-dom/cjs/react-dom.development.js:60:7)
      at isConcurrentActEnvironment (node_modules/react-dom/cjs/react-dom.development.js:25299:7)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom.development.js:27598:12)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom.development.js:25547:5)
      at Object.enqueueSetState (node_modules/react-dom/cjs/react-dom.development.js:17925:7)
      at Transition.Object.<anonymous>.Component.setState (node_modules/react/cjs/react.development.js:354:16)
      at Transition.safeSetState (node_modules/react-transition-group/cjs/Transition.js:353:10)
      at node_modules/react-transition-group/cjs/Transition.js:300:16
      at nextCallback (node_modules/react-transition-group/cjs/Transition.js:365:9)
      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)

    console.error
      Warning: The current testing environment is not configured to support act(...)

      at printWarning (node_modules/react-dom/cjs/react-dom.development.js:86:30)
      at error (node_modules/react-dom/cjs/react-dom.development.js:60:7)
      at isConcurrentActEnvironment (node_modules/react-dom/cjs/react-dom.development.js:25299:7)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom.development.js:27598:12)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom.development.js:25547:5)
      at Object.enqueueSetState (node_modules/react-dom/cjs/react-dom.development.js:17925:7)
      at Transition.Object.<anonymous>.Component.setState (node_modules/react/cjs/react.development.js:354:16)
      at Transition.safeSetState (node_modules/react-transition-group/cjs/Transition.js:353:10)
      at node_modules/react-transition-group/cjs/Transition.js:332:16
      at nextCallback (node_modules/react-transition-group/cjs/Transition.js:365:9)
      at node_modules/@mui/utils/useTimeout/useTimeout.js:35:7
      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)

PASS __tests__/CodeBlockRenderer.test.tsx
PASS __tests__/LatexRenderer.test.tsx
PASS __tests__/component/Conversation.test.tsx (65.341 s)
A worker process has failed to exit gracefully and has been force exited. This is likely caused by tests leaking due to improper teardown. Try running with --detectOpenHandles to find leaks. Active timers can also cause this, ensure that .unref() was called on them.
-----------------------------------|---------|----------|---------|---------|------------------------------------------------------------------------
File                               | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                                                      
-----------------------------------|---------|----------|---------|---------|------------------------------------------------------------------------
All files                          |    82.6 |    79.47 |   91.37 |    82.6 |                                                                        
 chat-components                   |   89.91 |    89.14 |   98.21 |   90.55 |                                                                        
  Conversation.tsx                 |      95 |    78.94 |     100 |   94.54 | 57,73,87                                                               
  ConversationList.tsx             |   97.95 |      100 |     100 |   97.91 | 52                                                                     
  Message.tsx                      |   83.33 |     87.5 |   95.23 |   84.61 | 93,154-157,164-177                                                     
  MessageConfigContext.tsx         |     100 |      100 |     100 |     100 |                                                                        
  NewMessage.tsx                   |   86.36 |       80 |     100 |      90 | 23-24                                                                  
 chat-components/renderers         |   96.96 |    93.75 |     100 |   96.96 |                                                                        
  CodeBlockRenderer.tsx            |     100 |      100 |     100 |     100 |                                                                        
  LatexRenderer.tsx                |   95.23 |       90 |     100 |   95.23 | 35                                                                     
 server                            |   62.05 |    58.13 |      75 |   62.13 |                                                                        
  app.ts                           |   56.75 |    49.27 |      72 |    56.8 | 26,100,112,123,185,212-239,314-367,399,419-450,458-505,514-545,562-580 
  index.ts                         |     100 |    94.11 |     100 |     100 | 54                                                                     
 server/database                   |      75 |    55.55 |   33.33 |      75 |                                                                        
  index.ts                         |      75 |    55.55 |   33.33 |      75 | 19,35-36,40-41                                                         
 server/database/models            |     100 |      100 |     100 |     100 |                                                                        
  Conversation.ts                  |     100 |      100 |     100 |     100 |                                                                        
  Message.ts                       |     100 |      100 |     100 |     100 |                                                                        
  User.ts                          |     100 |      100 |     100 |     100 |                                                                        
  index.ts                         |     100 |      100 |     100 |     100 |                                                                        
 server/database/seeders           |     100 |      100 |     100 |     100 |                                                                        
  20240827043208-seed-test-data.ts |     100 |      100 |     100 |     100 |                                                                        
 server/helpers                    |   97.48 |     88.7 |     100 |   97.27 |                                                                        
  messageHelpers.ts                |   96.77 |    82.92 |     100 |   96.66 | 86-87,256,311                                                          
  typeConverters.ts                |     100 |      100 |     100 |     100 |                                                                        
-----------------------------------|---------|----------|---------|---------|------------------------------------------------------------------------

Test Suites: 11 passed, 11 total
Tests:       173 passed, 173 total
Snapshots:   0 total
Time:        122.767 s
Ran all test suites.
